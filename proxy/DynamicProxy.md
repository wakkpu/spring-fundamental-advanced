### 리플렉션
프록시를 사용해 기존 코드를 변경하지 않고 부가 기능을 적용할 수 있었다.

하지만 대상 클래스 수만큼 로그 추적을 위한 프록시 클래스를 만들어야 한다는 점이다.

자바의 JDK 동적 프록시 기술이나 CGLIB 같은 프록시 생성 기술을 사용하면 프록시 객체를 동적으로 만들어낼 수 있다. 
프록시를 적용할 코드를 하나만 만들어두고 동적 프록시 기술을 사용해서 프록시 객체를 찍어내면 된다.

JDK 동적 프록시를 이해하기 위해서는 자바의 리플렉션을 이해해야 한다.
리플렉션을 사용하면 클래스나 메서드의 메타 정보를 동적으로 획득하고, 코드도 동적으로 호출할 수 있다.

### 주의할 점
클래스와 메서드의 메타 정보를 사용해서 애플리케이션을 동적으로 유연하게 만들 수 있다.

하지만 런타임에 동작하기 때문에 컴파일 시점에 오류를 잡을 수 없다.

가장 좋은 오류는 개발자가 즉시 확인할 수 있는 컴파일 오류이고,
가장 무서운 오류는 사용자가 직접 실행할 때 발생하는 런타임 오류이다.

프레임워크 개발이나 매우 일반적인 공통 처리가 필요할 때 부분적으로 주의해서 사용해야 한다.

### JDK 동적 프록시
동적 프록시 기술을 사용하면 개발자가 직접 프록시 클래스를 만들지 않아도 된다.
이름 그대로 프록시 객체를 동적으로 런타임에 개발자 대신 만들어준다.

### CGLIB
JDK 동적 프록시는 인터페이스를 구현(implements)해서 프록시를 만든다.

CGLIB은 구체 클래스를 상속(extends)해서 프록시를 만든다.

### 제약
상속을 사용하기 때문에 몇 가지 제약이 있다.

- 부모 클래스의 생성자를 체크해야 한다
  - CGLIB은 자식 클래스를 동적으로 생성하기 때문에 기본 생성자가 필요하다
- 클래스에 final 키워드가 붙으면 상속이 불가능하다
  - CGLIB에서 예외가 발생한다
- 메서드에 final 키워드가 붙으면 해당 메서드를 오버라이드할 수 없다
  - CGLIB에서 프록시 로직이 동작하지 않는다

### 남은 문제
- 인터페이스가 있는 경우에 JDK 동적 프록시를 적용하고, 그렇지 않은 경우에는 CGLIB을 적용하려면 어떻게 해야할까?
- 두 기술을 함께 사용할 때 부가 기능을 제공하기 위해 JDK 동적 프록시가 제공하는 InvocationHandler와 
  CGLIB가 제공하는 MethodInterceptor를 각각 중복으로 만들어서 관리해야 할까?
- 특정 조건에 맞을 때 프록시 로직을 적용하는 기능도 공통으로 제공하려면?

-> Spring Proxy Factory